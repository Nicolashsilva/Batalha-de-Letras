#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

#define MAX_TENTATIVAS 6

// Definição das palavras para cada nível de dificuldade
const char *palavrasFaceis[] = {"gato", "cachorro", "peixe", "cobra", "pato"};
const char *palavrasMedias[] = {"medico", "advogado", "engenheiro", "professor", "bombeiro"};
const char *palavrasDificeis[] = {"python", "javascript", "cplusplus", "ruby", "typescript"};
const char *palavrasExpert[] = {"acre", "bahia", "ceara", "goias", "amazonas"};

void escolherPalavra(const char *palavras[], int tamanho, char *palavraEscolhida) {
    srand(time(NULL));
    int indice = rand() % tamanho;
    strcpy(palavraEscolhida, palavras[indice]);
}

int letraJaFoiEscolhida(char letra, const char *letrasEscolhidas) {
    for (int i = 0; i < strlen(letrasEscolhidas); i++) {
        if (letrasEscolhidas[i] == letra) {
            return 1;
        }
    }
    return 0;
}

void exibirProgresso(const char *palavra, const char *letrasEscolhidas) {
    for (int i = 0; i < strlen(palavra); i++) {
        if (letraJaFoiEscolhida(palavra[i], letrasEscolhidas)) {
            printf("%c ", palavra[i]);
        } else {
            printf("_ ");
        }
    }
    printf("\n");
}

int todasLetrasForamAdivinhadas(const char *palavra, const char *letrasEscolhidas) {
    for (int i = 0; i < strlen(palavra); i++) {
        if (!letraJaFoiEscolhida(palavra[i], letrasEscolhidas)) {
            return 0;
        }
    }
    return 1;
}

int main() {
    int nivel;
    char palavraEscolhida[20];
    char letrasEscolhidas[26] = {0};
    int tentativas = 0;

    printf("Escolha um nivel de dificuldade (1 = facil, 2 = medio, 3 = dificil, 4 = expert): ");
    scanf("%d", &nivel);

    switch (nivel) {
        case 1:
            printf("Dica: Animais\n");
            escolherPalavra(palavrasFaceis, sizeof(palavrasFaceis)/sizeof(palavrasFaceis[0]), palavraEscolhida);
            break;
        case 2:
            printf("Dica: Profissões\n");
            escolherPalavra(palavrasMedias, sizeof(palavrasMedias)/sizeof(palavrasMedias[0]), palavraEscolhida);
            break;
        case 3:
            printf("Dica: Linguagens de Programação\n");
            escolherPalavra(palavrasDificeis, sizeof(palavrasDificeis)/sizeof(palavrasDificeis[0]), palavraEscolhida);
            break;
        case 4:
            printf("Dica: Estados do Brasil\n");
            escolherPalavra(palavrasExpert, sizeof(palavrasExpert)/sizeof(palavrasExpert[0]), palavraEscolhida);
            break;
        default:
            printf("Nivel invalido!\n");
            return 1;
    }

    while (tentativas < MAX_TENTATIVAS) {
        char letra;
        printf("Tentativas restantes: %d\n", MAX_TENTATIVAS - tentativas);
        exibirProgresso(palavraEscolhida, letrasEscolhidas);

        printf("Digite uma letra: ");
        scanf(" %c", &letra);

        if (letraJaFoiEscolhida(letra, letrasEscolhidas)) {
            printf("Letra ja foi escolhida! Tente outra.\n");
            continue;
        }

        letrasEscolhidas[strlen(letrasEscolhidas)] = letra;

        if (!strchr(palavraEscolhida, letra)) {
            tentativas++;
        }

        if (todasLetrasForamAdivinhadas(palavraEscolhida, letrasEscolhidas)) {
            printf("Parabens! Voce adivinhou a palavra: %s\n", palavraEscolhida);
            break;
        }

        if (tentativas >= MAX_TENTATIVAS) {
            printf("Fim de jogo! A palavra era: %s\n", palavraEscolhida);
        }
    }

    return 0;
}
